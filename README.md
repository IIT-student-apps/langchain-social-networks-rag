# langchain-social-networks-rag

В ассистента уже загружены файлы, содержащие различную информацию про социальные сети

## Ubuntu

## Установка

 Для начала стоит установить ollama и LLM для проекта:
 
```
chmod +x install_ollama_and_yandex.sh
./install_ollama_and_yandex.sh
```
Процесс займёт какое-то время

Дальше идёт установка основных библиотек:

```
chmod +x setup.sh
./setup.sh
```

После этого запускается fastapi:
```
chmod +x runfastapi.sh
./runfastapi.sh
```

## Работа с программой

### Через терминал

Вкладка терминала с fastapi должна оставаться открытой. После этого можно открыть новую вкладку и запустить следующие скрипты в зависимости от цели:
1. Общение с моделью:

```
./chat.sh
```
2. Загрузка своего файла:

```
./upload.sh мой_файл.pdf

```
Если успешно загрузился файл, ответ будет каким-то таким:
```
{
  "message": "File твой_файл.pdf has been successfully uploaded and indexed.",
  "file_id": 1
}
```

4. Проверка списка загруженных файлов:
```
curl -X 'GET' 'http://127.0.0.1:8000/list-docs'
```
5. Удалить загруженный файл (c указанием индекса файла):
```
./delete.sh 1
```

### Через тг бота

Необходимо создать файл .env в корневой папке и в нём прописать токен бота

```
TELEGRAM_TOKEN=
```

В новой акладке терминала запускается виртуальное окружение 
```
srouce venv/bin/activate
```
После чего в папке api запускается бот:
```
python3 tg.py
```

## Для Windows

## Установка

Необходимо перейти в папку api и установить все зависимости

```
pip install -r requirements.txt
```

Далее необходимо установить ollama 

```
pip install ollama
```

И далее установить необходимую модель, в случае данного проекта это яндекс гпт

```
ollama pull denisavetisyan/saiga_yandexgpt_8b_gguf_q5_k_m
```

## Работа с программой

в папке api запускается сначала фастапи:

```
uvicorn main:app --reload
```

Далее в новом окне командной строки запускается тг бот

```
python tg.py
```


## Команды тг бота 

1. Добавление файла
   
   Достаточно просто перекинуть файл в чат, после чего он будет загружен в отдельную папку rag_files

2. Просмотр списка файлов
   ```
   /list
   ```
   После чего выведется спискок файлов с их индексами

3. Удаление файла
   ```
   /delete *index*
   ```
   на место \*index\* необходимо поставить индекс нужного файла, указанный в /list

4. Просмотр истории чата
   ```
   /history
   ```

5. Удаление истории чата
   ```
   /reset
   ```
